<form
  (ngSubmit)="submit()"
  [formGroup]="form"
  class="flex flex-col h-full gap-4 p-4 m-2 overflow-y-auto rounded-md bg-secondary-50"
  appClickOutside
  (clickOutside)="closeModal()"
  [disableOutsideClick]="!openedAsModal"
>
  <div class="form-control" [ngClass]="{ error: title.invalid && title.touched }">
    <div class="form-control__label">
      <label for="title">Title</label>
      <span class="form-control__label--error"></span>
    </div>
    <input
      class="form-control__input"
      type="title"
      name="title"
      id="title"
      formControlName="title"
      tabindex="1"
      appAutofocus
    />
  </div>
  <div class="form-control__label">
    <label for="file">Image</label>
    <span class="form-control__label--error"></span>
  </div>
  <div
    class="relative overflow-hidden border rounded-md form-control border-secondary-400 min-h-[24rem]"
    [ngClass]="{ error: title.invalid && title.touched }"
  >
    <img
      [src]="imagePath ?? 'assets/icons/plus.svg'"
      alt=""
      class="h-96 aspect-video"
      [ngClass]="{ 'opacity-20 -scale-50 object-contain': !imagePath, 'object-cover': imagePath }"
    />
    <input
      appDragAndDropFile
      type="file"
      class="absolute inset-0 z-10 w-full h-full opacity-0"
      name="file"
      id="file"
      (change)="imagePreview($event)"
      tabindex="-1"
    />
  </div>
  <div class="form-control" [ngClass]="{ error: description.invalid && description.touched }">
    <div class="form-control__label">
      <label for="description">Description</label>
      <span class="form-control__label--error"></span>
    </div>
    <textarea
      class="form-control__input"
      type="description"
      name="description"
      id="description"
      formControlName="description"
      tabindex="2"
    ></textarea>
  </div>
  <div class="flex justify-end gap-4">
    <button type="button" class="w-full app-button secondary" (click)="closeModal()" tabindex="3">Close</button>
    <button type="submit" class="w-full app-button primary" tabindex="4">Create</button>
  </div>
</form>
